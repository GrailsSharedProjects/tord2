{"filter":false,"title":"imagebed.js","tooltip":"/grails-app/assets/javascripts/imagebed.js","undoManager":{"mark":67,"position":67,"stack":[[{"start":{"row":202,"column":0},"end":{"row":204,"column":48},"action":"remove","lines":["","\t\t      //if (option == 'toggle') data.toggle()","\t\t      //else if (option) data.setState(option)"],"id":2}],[{"start":{"row":201,"column":82},"end":{"row":202,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":169,"column":0},"end":{"row":169,"column":21},"action":"remove","lines":["\t\t\t\t\tinitAccordion();"],"id":4},{"start":{"row":169,"column":0},"end":{"row":170,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":170,"column":0},"end":{"row":171,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":170,"column":0},"end":{"row":198,"column":7},"action":"insert","lines":["    /* Accordion Toggle Items */","    var iconOpen = 'fa-chevron-down',","        iconClose = 'fa-chevron-right';","","    jQuery('.tzaccordion').each(function(){","        jQuery(this).find('p:first').show();","        jQuery(this).find('h6:first').addClass('active');","        jQuery(this).find('h6:first i').addClass(iconOpen).removeClass(iconClose);","    });","    jQuery('.tzaccordion h6').click(function() {","        var $_h6 = jQuery(this);","        var accordion = $_h6.closest(\".tzaccordion\");","        accordion.find('.active i').addClass(iconClose).removeClass(iconOpen);","        accordion.find('.active').removeClass('active');","        ","        accordion.find('p').slideUp('normal');","        if($_h6.next('p').is(':hidden') == true) {","            $_h6.find('i').addClass(iconOpen).removeClass(iconClose);","            $_h6.addClass('active');","            $_h6.next('p').slideDown('normal');","        }","        ","        accordion.find('div.pp').slideUp('normal');","        if($_h6.next('div.pp').is(':hidden') == true) {","        \t$_h6.find('i').addClass(iconOpen).removeClass(iconClose);","        \t$_h6.addClass('active');","        \t$_h6.next('div.pp').slideDown('normal');","        }","    });"],"id":6}],[{"start":{"row":169,"column":0},"end":{"row":185,"column":14},"action":"remove","lines":["","    /* Accordion Toggle Items */","    var iconOpen = 'fa-chevron-down',","        iconClose = 'fa-chevron-right';","","    jQuery('.tzaccordion').each(function(){","        jQuery(this).find('p:first').show();","        jQuery(this).find('h6:first').addClass('active');","        jQuery(this).find('h6:first i').addClass(iconOpen).removeClass(iconClose);","    });","    jQuery('.tzaccordion h6').click(function() {","        var $_h6 = jQuery(this);","        var accordion = $_h6.closest(\".tzaccordion\");","        accordion.find('.active i').addClass(iconClose).removeClass(iconOpen);","        accordion.find('.active').removeClass('active');","        ","        accord"],"id":9},{"start":{"row":169,"column":0},"end":{"row":169,"column":5},"action":"insert","lines":["\t\t\t\t\t"]},{"start":{"row":169,"column":6},"end":{"row":169,"column":7},"action":"remove","lines":["o"]},{"start":{"row":169,"column":7},"end":{"row":169,"column":9},"action":"remove","lines":[".f"]},{"start":{"row":169,"column":8},"end":{"row":170,"column":19},"action":"remove","lines":["nd('p').slideUp('normal');","        if($_h6.nex"]},{"start":{"row":169,"column":9},"end":{"row":175,"column":9},"action":"remove","lines":["('p').is(':hidden') == true) {","            $_h6.find('i').addClass(iconOpen).removeClass(iconClose);","            $_h6.addClass('active');","            $_h6.next('p').slideDown('normal');","        }","        ","        a"]},{"start":{"row":169,"column":9},"end":{"row":169,"column":10},"action":"insert","lines":["A"]},{"start":{"row":169,"column":18},"end":{"row":169,"column":23},"action":"remove","lines":[".find"]},{"start":{"row":169,"column":19},"end":{"row":169,"column":45},"action":"remove","lines":["'div.pp').slideUp('normal'"]},{"start":{"row":169,"column":21},"end":{"row":176,"column":0},"action":"remove","lines":["","        if($_h6.next('div.pp').is(':hidden') == true) {","        \t$_h6.find('i').addClass(iconOpen).removeClass(iconClose);","        \t$_h6.addClass('active');","        \t$_h6.next('div.pp').slideDown('normal');","        }","    });",""]}],[{"start":{"row":169,"column":5},"end":{"row":169,"column":6},"action":"insert","lines":["A"],"id":10}],[{"start":{"row":169,"column":6},"end":{"row":169,"column":7},"action":"insert","lines":["P"],"id":11}],[{"start":{"row":169,"column":7},"end":{"row":169,"column":8},"action":"insert","lines":["P"],"id":12}],[{"start":{"row":169,"column":8},"end":{"row":169,"column":9},"action":"insert","lines":["."],"id":13}],[{"start":{"row":169,"column":0},"end":{"row":169,"column":25},"action":"remove","lines":["\t\t\t\t\tAPP.initAccordion();"],"id":14}],[{"start":{"row":168,"column":5},"end":{"row":169,"column":0},"action":"remove","lines":["",""],"id":15}],[{"start":{"row":75,"column":0},"end":{"row":76,"column":0},"action":"remove","lines":["\t\t\t\t\t\tjQuery('[data-toggle=\"popover\"]').popover()",""],"id":18}],[{"start":{"row":219,"column":11},"end":{"row":220,"column":0},"action":"insert","lines":["",""],"id":19},{"start":{"row":220,"column":0},"end":{"row":220,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":220,"column":1},"end":{"row":221,"column":0},"action":"insert","lines":["",""],"id":20},{"start":{"row":221,"column":0},"end":{"row":221,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":221,"column":1},"end":{"row":222,"column":0},"action":"insert","lines":["",""],"id":21},{"start":{"row":222,"column":0},"end":{"row":222,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":222,"column":0},"end":{"row":222,"column":1},"action":"remove","lines":["\t"],"id":22}],[{"start":{"row":221,"column":1},"end":{"row":222,"column":0},"action":"remove","lines":["",""],"id":23}],[{"start":{"row":221,"column":1},"end":{"row":222,"column":0},"action":"insert","lines":["",""],"id":24},{"start":{"row":222,"column":0},"end":{"row":222,"column":1},"action":"insert","lines":["\t"]}],[{"start":{"row":222,"column":0},"end":{"row":222,"column":1},"action":"remove","lines":["\t"],"id":25}],[{"start":{"row":222,"column":0},"end":{"row":222,"column":1},"action":"insert","lines":["/"],"id":26}],[{"start":{"row":222,"column":1},"end":{"row":222,"column":2},"action":"insert","lines":["/"],"id":27}],[{"start":{"row":222,"column":2},"end":{"row":222,"column":3},"action":"insert","lines":["/"],"id":28}],[{"start":{"row":222,"column":3},"end":{"row":222,"column":4},"action":"insert","lines":["/"],"id":29}],[{"start":{"row":222,"column":3},"end":{"row":222,"column":4},"action":"remove","lines":["/"],"id":30}],[{"start":{"row":222,"column":2},"end":{"row":222,"column":3},"action":"remove","lines":["/"],"id":31}],[{"start":{"row":222,"column":2},"end":{"row":222,"column":3},"action":"insert","lines":[" "],"id":32}],[{"start":{"row":222,"column":3},"end":{"row":222,"column":4},"action":"insert","lines":["U"],"id":33}],[{"start":{"row":222,"column":4},"end":{"row":222,"column":5},"action":"insert","lines":["p"],"id":34}],[{"start":{"row":222,"column":5},"end":{"row":222,"column":6},"action":"insert","lines":["d"],"id":35}],[{"start":{"row":222,"column":6},"end":{"row":222,"column":7},"action":"insert","lines":["a"],"id":36}],[{"start":{"row":222,"column":7},"end":{"row":222,"column":8},"action":"insert","lines":["t"],"id":37}],[{"start":{"row":222,"column":8},"end":{"row":222,"column":9},"action":"insert","lines":["e"],"id":38}],[{"start":{"row":222,"column":9},"end":{"row":222,"column":10},"action":"insert","lines":["e"],"id":39}],[{"start":{"row":222,"column":10},"end":{"row":222,"column":11},"action":"insert","lines":["r"],"id":40}],[{"start":{"row":222,"column":11},"end":{"row":222,"column":12},"action":"insert","lines":["s"],"id":41}],[{"start":{"row":222,"column":11},"end":{"row":222,"column":12},"action":"remove","lines":["s"],"id":42}],[{"start":{"row":222,"column":10},"end":{"row":222,"column":11},"action":"remove","lines":["r"],"id":43}],[{"start":{"row":222,"column":9},"end":{"row":222,"column":10},"action":"remove","lines":["e"],"id":44}],[{"start":{"row":222,"column":9},"end":{"row":222,"column":10},"action":"insert","lines":["r"],"id":45}],[{"start":{"row":222,"column":10},"end":{"row":222,"column":11},"action":"insert","lines":[" "],"id":46}],[{"start":{"row":222,"column":11},"end":{"row":222,"column":12},"action":"insert","lines":["F"],"id":47}],[{"start":{"row":222,"column":12},"end":{"row":222,"column":13},"action":"insert","lines":["u"],"id":48}],[{"start":{"row":222,"column":13},"end":{"row":222,"column":14},"action":"insert","lines":["n"],"id":49}],[{"start":{"row":222,"column":14},"end":{"row":222,"column":15},"action":"insert","lines":["c"],"id":50}],[{"start":{"row":222,"column":15},"end":{"row":222,"column":16},"action":"insert","lines":["t"],"id":51}],[{"start":{"row":222,"column":16},"end":{"row":222,"column":17},"action":"insert","lines":["i"],"id":52}],[{"start":{"row":222,"column":17},"end":{"row":222,"column":18},"action":"insert","lines":["o"],"id":53}],[{"start":{"row":222,"column":18},"end":{"row":222,"column":19},"action":"insert","lines":["n"],"id":54}],[{"start":{"row":222,"column":19},"end":{"row":222,"column":20},"action":"insert","lines":["s"],"id":55}],[{"start":{"row":222,"column":20},"end":{"row":223,"column":0},"action":"insert","lines":["",""],"id":56}],[{"start":{"row":223,"column":0},"end":{"row":323,"column":1},"action":"insert","lines":["function setProgress (p) {","    if (p < 0) {","        jQuery('.uploader .uploaderIconLoading').height(0);","        jQuery('.uploader .uploaderProcess').text('');","    }","    else {","        p = p+'%';","        jQuery('.uploader .uploaderIconLoading').height(p);","        jQuery('.uploader .uploaderProcess').text('文件已上传'+p);","    }","}","","function sendFile (f) {","    var uploadUrl = '/uploader/upload';","    jQuery.ajax({","        xhr: function() {","            var xhrobj = jQuery.ajaxSettings.xhr();","            if (xhrobj.upload) {","                xhrobj.upload.addEventListener('progress', function (e) {","                    var percent = 0;","                    var position = e.loaded || e.position;","                    var total = e.total;","                    if (e.lengthComputable) {","                        percent = Math.ceil(position / total * 100);","                    }","                    setProgress(percent);","                }, false);","            }","            return xhrobj;","        },","        url: uploadUrl,","        type: 'POST',","        contentType: false,","        processData: false,","        cache: false,","        data: f,","        success: function(msg){","        \tafterUpload(msg)","        },","        error: function (e) {","        \talert(\"发生错误，请刷新重试。\")","        }","    });","    ","    function afterUpload(msg) {","    \tif(msg.success){","    \t\tvar relPath = msg.msg;","    \t\tjQuery(\".image-picker a\").find(\"img\").removeClass(\"checked\");","    \t\tjQuery(\".upload-widget .uploaderImage\").html(\"<img src=\\\"\"+relPath+\"\\\" data-id=\\\"\"+relPath.split(\"?id=\")[1]+\"\\\" class=\\\"checked\\\" />\");","    \t\tjQuery(\".upload-widget .uploadedSection\").show();","    \t\tjQuery(\".upload-widget .uploadedSection h6\").click();","    \t}else{","    \t\talert(\"Error! \" + msg.msg);","    \t}","    }","}","","function initUploader(){","\tjQuery('.uploader .uploaderInput').on('change', function (e) {","\t    var fs = e.target.files || e.dataTransfer && e.dataTransfer.files;","\t    handleFiles(fs);","\t})","\tjQuery('.uploader .uploaderDrag').on('click', function (e) {","\t    e.stopPropagation();","\t    e.preventDefault();","\t    jQuery('.uploader .uploaderInput').trigger('click');","\t});","\tjQuery('.uploader .uploaderDrag').on('dragenter', function(e) {","\t    e.stopPropagation();","\t    e.preventDefault();","\t});","\tjQuery('.uploader .uploaderDrag').on('dragover', function(e) {","\t    e.stopPropagation();","\t    e.preventDefault();","\t});","\tjQuery('.uploader .uploaderDrag').on('drop', function(e) {","\t    e.stopPropagation();","\t    e.preventDefault();","\t    var a = e.originalEvent;","\t    var fs = a.target.files || a.dataTransfer && a.dataTransfer.files;","\t    handleFiles(fs);","\t});","\t","\tfunction handleFiles (files) {","\t    for (var i = 0; i < files.length; i++) {","\t        var fd = new FormData();","\t        if (files[i].type.match('image.*')) {","\t            fd.append('file', files[i])     ","\t            sendFile(fd);","\t            break;","\t        }","\t    }","\t}","}","","function initImagePicker(){","\tjQuery(\".image-picker a\").on('click', function(){","\t\tjQuery(\".image-picker a\").find(\"img\").removeClass(\"checked\");","\t\tjQuery(this).find(\"img\").addClass(\"checked\");","\t});","}"],"id":57}],[{"start":{"row":69,"column":17},"end":{"row":69,"column":25},"action":"remove","lines":["uploader"],"id":58},{"start":{"row":69,"column":17},"end":{"row":69,"column":18},"action":"insert","lines":["i"]}],[{"start":{"row":69,"column":18},"end":{"row":69,"column":19},"action":"insert","lines":["m"],"id":59}],[{"start":{"row":69,"column":19},"end":{"row":69,"column":20},"action":"insert","lines":["a"],"id":60}],[{"start":{"row":69,"column":20},"end":{"row":69,"column":21},"action":"insert","lines":["g"],"id":61}],[{"start":{"row":69,"column":21},"end":{"row":69,"column":22},"action":"insert","lines":["e"],"id":62}],[{"start":{"row":69,"column":22},"end":{"row":69,"column":23},"action":"insert","lines":["b"],"id":63}],[{"start":{"row":69,"column":23},"end":{"row":69,"column":24},"action":"insert","lines":["e"],"id":64}],[{"start":{"row":69,"column":24},"end":{"row":69,"column":25},"action":"insert","lines":["d"],"id":65}],[{"start":{"row":164,"column":10},"end":{"row":164,"column":18},"action":"remove","lines":["uploader"],"id":66},{"start":{"row":164,"column":10},"end":{"row":164,"column":11},"action":"insert","lines":["i"]}],[{"start":{"row":164,"column":11},"end":{"row":164,"column":12},"action":"insert","lines":["m"],"id":67}],[{"start":{"row":164,"column":12},"end":{"row":164,"column":13},"action":"insert","lines":["a"],"id":68}],[{"start":{"row":164,"column":13},"end":{"row":164,"column":14},"action":"insert","lines":["g"],"id":69}],[{"start":{"row":164,"column":14},"end":{"row":164,"column":15},"action":"insert","lines":["e"],"id":70}],[{"start":{"row":164,"column":15},"end":{"row":164,"column":16},"action":"insert","lines":["b"],"id":71}],[{"start":{"row":164,"column":16},"end":{"row":164,"column":17},"action":"insert","lines":["e"],"id":72}],[{"start":{"row":164,"column":17},"end":{"row":164,"column":18},"action":"insert","lines":["d"],"id":73}]]},"ace":{"folds":[],"scrolltop":2177,"scrollleft":0,"selection":{"start":{"row":164,"column":18},"end":{"row":164,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":154,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1442497762147,"hash":"e4ee22e5ae508e226ece4e601f81f8df22c49c19"}